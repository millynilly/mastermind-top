require_relative 'code.rb'

class Game

  @code = ''
  @score = []
  @guesses  = 0

  attr_reader :score
  attr_reader :guesses

  def initialize
    @code = Code.new.generate_code
    @score = ['', '']
    @guesses = 0
  end

  def print_intro
    puts 'Play Mastermind'
    puts '---------------'
    puts 'Guess the four digit code generated by the computer.'
    puts "\nDigits can be from 1 to 6"
    puts '1   2   3   4   5   6'
    puts "\nAfter your guess, feedback is given:"
    puts "\tX means you guessed the right digit in the right position."
    puts "\tO means you guessed the right digit but in the wrong position."
    puts "\nYou have 12 guesses."
    puts "\nEnter 'p' to start. Enter 'q' at any time to quit."
  end

  def feedback(guess)
    #Accepts a guess (string) and returns a score as an array of strings
    #eg ['XX', 'O']
    
    @guesses += 1
    digits = guess.split('')

    digits.each_with_index do |digit, ind|

      if digit.to_i == @code[ind]
        score[0] += 'X'
      elsif @code.include?(digit)
        score[1] += 'O'
      end
    end

  end

  def win?
    @score[0] == 'XXXX' ? true : false
  end

  def quit_game
    puts 'Game over. Play again? [y/n]'
    gets.chomp
  end

end